rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Allow read/write access to email verifications (for custom OTP system)
    match /emailVerifications/{uid} {
      allow read, write: if true;
    }
    
    // Allow read/write access to user profiles (consolidated in users collection)
    match /users/{uid} {
      allow read, write: if true;
    }
    
    // Allow read/write access to email-based user lookup
    match /usersByEmail/{email} {
      allow read, write: if true;
    }
    
    // Allow read/write access to phone-based user lookup
    match /usersByPhone/{phoneNumber} {
      allow read, write: if true;
    }
  }
}
